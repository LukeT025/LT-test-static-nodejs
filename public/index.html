<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dice Roller API — Test Page</title>
<style>
  :root{--fg:#111;--muted:#555;--border:#ddd;--btn-bg:#fff;--btn-fg:#111;--btn-bd:#222}
  body{font:16px system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:2rem;color:var(--fg);line-height:1.5}
  h1{margin:.25rem 0 1rem}
  p.note{color:var(--muted);margin:.25rem 0 1.25rem}
  .row{display:flex;gap:.5rem;flex-wrap:wrap;margin:.5rem 0 1rem}
  button{
    padding:.55rem .95rem;
    border:1px solid var(--btn-bd);
    border-radius:.5rem;
    background:var(--btn-bg);
    color:var(--btn-fg);
    cursor:pointer;
  }
  button:hover{background:#111;color:#fff;border-color:#111}
  pre{background:#f7f7f7;border:1px solid var(--border);padding:.75rem;overflow:auto;min-height:3rem}
</style>

<h1>Dice Roller API — Test Page</h1>
<p class="note">This page only <strong>tests</strong> the REST endpoints. It is <em>not</em> the dice UI.</p>

<div class="row">
  <button id="btnWake">Wake Server</button>
  <button id="btnRoll1d6">Roll 1d6</button>
  <button id="btnRoll5d6">Roll 5d6</button>
  <button id="btnCorsFail">Trigger CORS Failure</button>
</div>

<pre id="out" aria-live="polite"></pre>

<script>
const out = document.getElementById('out');
const log = (x)=> out.textContent = typeof x === 'string' ? x : JSON.stringify(x, null, 2);

document.getElementById('btnWake').onclick = () => {
  fetch('/api/wakeup').then(r=>r.json()).then(log).catch(e=>log(String(e)));
};

document.getElementById('btnRoll1d6').onclick = () => {
  fetch('/api/roll?sides=6').then(r=>r.json()).then(log).catch(e=>log(String(e)));
};

document.getElementById('btnRoll5d6').onclick = () => {
  fetch('/api/rolls?dice=5&sides=6').then(r=>r.json()).then(log).catch(e=>log(String(e)));
};

document.getElementById('btnCorsFail').onclick = () => {
  fetch('/api/blocked')
    .then(r=>r.text())
    .then(log)
    .catch(e=>log(String(e)));
};
</script>
